<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Location</title>
  <script>
    function getLocation() {
      if (navigator.geolocation) {
        console.log(navigator.geolocation);
        navigator.geolocation.getCurrentPosition(
          position => {
            // 发送位置数据到 React Native
            console.log(position);
            window.ReactNativeWebView.postMessage(JSON.stringify({...position, test: 'test message'}));
          },
          error => {
            // 发送错误信息到 React Native
            window.ReactNativeWebView.postMessage(JSON.stringify({ error: error.message }));
          },
          { enableHighAccuracy: true, timeout: 20000, maximumAge: 1000 }
        );
      } else {
        window.ReactNativeWebView.postMessage(JSON.stringify({ error: 'Geolocation is not supported by this browser.' }));
      }
    }
    
    window.onload = () => {
      getLocation();
    };
  </script>
</head>
<body>
  <h1>Getting Location...</h1>
</body>
</html>
